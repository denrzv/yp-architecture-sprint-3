# Подзадание 1.2: Архитектура микросервисов

Исходя из выделенных доменов и границ контекстов, а также дополнительных требованиях к целевой системе, система разбивается на следующие контейнеры:

### Сервис управления устройствами (Device Management Service):
* Управление состоянием устройств (включение/выключение)
* Отправка команд на устройства
* Обработка ответов от устройств

###	Сервис телеметрии (Telemetry Service):
* Сбор и хранение данных телеметрии
* Обработка потоков данных
* Предоставление данных другим сервисам

### Сервис управления пользователями (User Management Service):
* Аутентификация и авторизация
* Управление профилями пользователей
* Контроль доступа к ресурсам

### Сервис управления домами и помещениями (House Management Service):
* Управление информацией о домах и помещениях
* Привязка устройств к помещениям
* Обработка сценариев автоматизации

### Сервис уведомлений (Notification Service):
* Уведомления пользователей о значимых событиях

### Сервис аналитики (Analytics Service):
* Генерация отчётов
* Шаблонизация отчётов

### API Gateway:
* Единая точка входа для клиентов
* Маршрутизация запросов к соответствующим микросервисам
* Обеспечение безопасности и контроля доступа

### Шина данных (Kafka):
* Асинхронное взаимодействие между микросервисами
* Обеспечение масштабируемости и отказоустойчивости

### MQTT брокер:
* Асинхронное взаимодействие с внешними устройствами
* Обеспечение двухсторонней связи для передачи команд и получения телеметрии и результатов команд
* Выбран наиболее популярный легковесный протокол в сфере IoT

Примечание:

* На схеме отдельно не отражены группы разработки, QA и DevOps, но предполагается их участие в настройке CI/CD и тестированиях
* Также для облегчения схемы не учтены CI/CD инструменты для автоматизации развёртывания в различных средах, а также ELK, Prometheus и Grafana для проактивного мониторинга работы системы
* Для повышения безопасности и гибкости в коммуникациях между сервисами также предполагается использования паттерна Service Mesh с использованием Istio

### Диаграмма контейнеров целевого решения:

![c4_container.png](c4_container.png)

### Диаграммы компонентов
[Диаграммы компонентов](components/README.md)

### Диаграммы классов
[Диаграммы классов](code/README.md)

### Диаграммы отношений сущностей
[ER-диаграммы](../section-1-3/README.md)